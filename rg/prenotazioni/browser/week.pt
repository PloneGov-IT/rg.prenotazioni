<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      metal:use-macro="context/main_template/macros/master">

    <metal:block fill-slot="content-description">
        <div id="annullaspostaprenotazione"
             tal:condition="view/prenotazioni/uid_move_booking">
            <a title="Annulla Spostamento" href="annullaSpostamento"
               tal:attributes="href string:${context/absolute_url}/annullaSpostamento">Annulla Spostamento</a>
        </div>
        <div class="documentDescription-box clear-block">
            <p class="documentDescription">
                <tal:block condition="here/Description">
                    <metal:field use-macro="python:here.widget('description', mode='view')">Description</metal:field>
                </tal:block>
            </p>
        </div>
        <div class="documentDescription-box clear-block">
            <span tal:replace="structure here/getDescriptionAgenda" />
        </div>      
    </metal:block>
    <metal:block fill-slot="content-core"
                 tal:define="prenotazione_macros nocall:here/@@prenotazione_macros;
                 ">
        <table id="week" class="pren">
                    <caption>
                      <metal:macro metal:use-macro="prenotazione_macros/week_navigator" />
                    </caption>
                    <thead>
                        <tr>
                            <tal:days repeat="day view/days">
                                <th scope="col" tal:condition="python:day[0]['inizio_m']!='0' or day[0]['inizio_p']!='0'"
                                tal:content="python:day[0]['giorno'] + ' ' + day[1].strftime('%d')">Lunedi</th>
                            </tal:days>
                            <th tal:condition="view/empty_week"
                              i18n:translate="no_booking_available"
                              >No booking available for this week</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <tal:days repeat="day view/days">
                                <td class="day"
                                tal:define="mattina python:day[0]['inizio_m']!='0';
                                pomeriggio python:day[0]['inizio_p']!='0'"
                                tal:condition="python:mattina or pomeriggio"
                                tal:attributes="rowspan python:day[0]['inizio_p'] != '0' and 1 or 2;
                                                class python:day[1]==view.actual_date and 'day selected' or 'day'">
                                    <table class="plain period">
                                        
                                    </table>
                                </td>
                            </tal:days>
                        </tr>
                        <tr>
                            <tal:days repeat="day view/days">
                                <td tal:define="mattina python:day[0]['inizio_m']!='0';
                                pomeriggio python:day[0]['inizio_p']!='0'"
                                tal:condition="python:pomeriggio"
                                tal:attributes="class python:day[1]==view.actual_date and 'day selected' or 'day'">
                                    <table class="plain period">
                                        
                                    </table>
                                </td>
                            </tal:days>
                        </tr>
                    </tbody>
                </table>
    </metal:block>

</html>