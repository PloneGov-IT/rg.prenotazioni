<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="rg.prenotazioni"
      >

    <metal:block fill-slot="content-description">
    </metal:block>

    <tal:comment replace="nothing">
        In order to make prenotazione_macros available for the context 
        'prenotazioni_folder' and 'prenotazioni' we replaced the standard 
        'view' with 'week_view'.
        Every template which make use of prenotazione_macros has to define week_view
    </tal:comment>

    <metal:block fill-slot="content-core"
                 tal:define="prenotazioni_folder nocall:view/prenotazioni_folder;
                             prenotazione_macros nocall:prenotazioni_folder/@@prenotazione_macros;
                             week_view nocall:prenotazioni_folder/@@prenotazioni_week_view;
                             slot_macro nocall:prenotazione_macros/onmove_slot;
                             here nocall:prenotazioni_folder;">

        <div tal:condition="context/getData_prenotazione">
          <div class="field" tal:condition="context/getData_prenotazione">
            <strong i18n:translate="">Reservation date:</strong>
            <span tal:replace="python:week_view.localized_time(context.getData_prenotazione(), True)" />
            &mdash;
            <span tal:content="python:week_view.localized_time(context.getData_scadenza(), True)" />
          </div>
          <h3 i18n:translate="">Please move this booking into a new available slot (green area).</h3>

        </div>
        <table id="week" class="pren">
          <caption >
            <metal:macro metal:use-macro="prenotazione_macros/week_navigator" />
          </caption>
          <thead>
              <tr>
                  <th scope="col">&nbsp;</th>
                  <tal:days repeat="day week_view/actual_week_days">
                      <th scope="col" tal:content="python:day.strftime('%d')">Lunedi</th>
                  </tal:days>
              </tr>
          </thead>
          <tbody>
              <tal:periods repeat="period week_view/periods">
                <metal:macro metal:use-macro="prenotazione_macros/day_period" />
              </tal:periods>
          </tbody>
      </table>
    </metal:block>

</html>
