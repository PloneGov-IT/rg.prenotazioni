<?xml version="1.0"?>
<contentrules>
 <rule name="rule-1" title="send email on state change"
    description="Viene inviata una mail al richiedente per confermare la sua prenotazione" enabled="True"
    event="Products.CMFCore.interfaces.IActionSucceededEvent"
    stop-after="False">
  <conditions>
   <condition type="plone.conditions.PortalType">
    <property name="check_types">
     <element>Prenotazione</element>
    </property>
   </condition>
   <condition type="plone.conditions.WorkflowTransition">
    <property name="wf_transitions">
     <element>publish</element>
    </property>
   </condition>
  </conditions>
  <actions>
   <action type="plone.actions.MailFromField">
    <property name="subject">Prenotazione accettata</property>
	<property name="source"></property>
	<property name="fieldName">email</property>
	<property name="target">target</property>
	<property name="message">La sua prenotazione "${title}" e' stata accettata:
${url}
	</property>
   </action>
  </actions>
 </rule>
 <assignment name="rule-1" bubbles="True" enabled="True" location=""/>
</contentrules>
